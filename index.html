<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rish Music Player</title>
    <link rel="icon" type="image/x-icon" href="img/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
    background: #dfe7ef;
    font-family: "Bitter", serif;
    margin: 0;
    padding: 0;
    

    position: relative;
    min-height: 100vh;
        }

        body::before {
            content: "";
            position: fixed;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;  
            height: 100%;
            background-image: url('img/logo.png');  
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.08;  
            pointer-events: none;  
            z-index: 0;
            filter: grayscale(100%);  
        }


        .wrapper {
            position: relative;
            z-index: 1;
        }
        
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            stroke-width: 0;
            stroke: currentColor;
            fill: currentColor;
        }
        
        .wrapper {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .player {
            background: #eef3f7;
            width: 410px;
            min-height: 480px;
            box-shadow: 0px 15px 35px -5px rgba(50, 88, 130, 0.32);
            border-radius: 15px;
            padding: 30px;
            position: relative;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player {
                width: 95%;
                padding: 20px;
                margin-top: 75px;
                min-height: initial;
                padding-bottom: 30px;
                max-width: 400px;
            }
        }
        
        .player__top {
            display: flex;
            align-items: flex-start;
            position: relative;
            z-index: 4;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player__top {
                flex-wrap: wrap;
            }
        }
        
        .player-cover {
            width: 300px;
            height: 300px;
            margin-left: -70px;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
            border-radius: 15px;
            z-index: 1;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player-cover {
                margin-top: -70px;
                margin-bottom: 25px;
                width: 290px;
                height: 230px;
                margin-left: auto;
                margin-right: auto;
            }
        }
        
        .player-cover__item {
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            width: 100%;
            height: 100%;
            border-radius: 15px;
            position: absolute;
            left: 0;
            top: 0;
        }
        
        .player-cover__item:before {
            content: "";
            background: inherit;
            width: 100%;
            height: 100%;
            box-shadow: 0px 10px 40px 0px rgba(76, 70, 124, 0.5);
            display: block;
            z-index: 1;
            position: absolute;
            top: 30px;
            transform: scale(0.9);
            filter: blur(10px);
            opacity: 0.9;
            border-radius: 15px;
        }
        
        .player-cover__item:after {
            content: "";
            background: inherit;
            width: 100%;
            height: 100%;
            box-shadow: 0px 10px 40px 0px rgba(76, 70, 124, 0.5);
            display: block;
            z-index: 2;
            position: absolute;
            border-radius: 15px;
        }
        
        .player-controls {
            flex: 1;
            padding-left: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player-controls {
                flex-direction: row;
                padding-left: 0;
                width: 100%;
                flex: unset;
                justify-content: center;
                gap: 10px;
            }
        }
        
        .player-controls__item {
            display: inline-flex;
            font-size: 30px;
            padding: 5px;
            margin-bottom: 10px;
            color: #acb8cc;
            cursor: pointer;
            width: 50px;
            height: 50px;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease-in-out;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player-controls__item {
                font-size: 26px;
                padding: 5px;
                margin-right: 10px;
                color: #acb8cc;
                cursor: pointer;
                width: 40px;
                height: 40px;
                margin-bottom: 0;
            }
        }
        
        .player-controls__item::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #fff;
            transform: scale(0.5);
            opacity: 0;
            box-shadow: 0px 5px 10px 0px rgba(76, 70, 124, 0.2);
            transition: all 0.3s ease-in-out;
        }
        
        @media screen and (min-width: 500px) {
            .player-controls__item:hover {
                color: #532ab9;
            }
            .player-controls__item:hover::before {
                opacity: 1;
                transform: scale(1.3);
            }
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player-controls__item:active {
                color: #532ab9;
            }
            .player-controls__item:active::before {
                opacity: 1;
                transform: scale(1.3);
            }
        }
        
        .player-controls__item .icon {
            position: relative;
            z-index: 2;
        }
        
        .player-controls__item.-xl {
            margin-bottom: 0;
            font-size: 95px;
            filter: drop-shadow(0 11px 6px rgba(172, 184, 204, 0.45));
            color: #fff;
            width: auto;
            height: auto;
            display: inline-flex;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .player-controls__item.-xl {
                margin-left: auto;
                font-size: 75px;
                margin-right: 0;
            }
        }
        
        .player-controls__item.-xl:before {
            display: none;
        }
        
        .player-controls__item.-favorite.active {
            color: red;
        }
        
        [v-cloak] {
            display: none;
        }
        
        [v-cloak] > * {
            display: none;
        }
        
        .progress {
            width: 100%;
            margin-top: -15px;
            user-select: none;
        }
        
        .progress__top {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
        }
        
        .progress__duration {
            color: #71829e;
            font-weight: 700;
            font-size: 20px;
            opacity: 0.5;
        }
        
        .progress__time {
            margin-top: 2px;
            color: #71829e;
            font-weight: 700;
            font-size: 16px;
            opacity: 0.7;
        }
        
        .progress__bar {
            height: 6px;
            width: 100%;
            cursor: pointer;
            background-color: #d0d8e6;
            display: inline-block;
            border-radius: 10px;
            position: relative;
        }
        
        .progress__current {
            height: inherit;
            width: 0%;
            background-color: #a3b3ce;
            border-radius: 10px;
            position: relative;
        }
        
        .progress__current::after {
            content: '';
            position: absolute;
            right: -6px;
            top: -3px;
            width: 12px;
            height: 12px;
            background: #532ab9;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .progress__bar:hover .progress__current::after {
            opacity: 1;
        }
        
        .album-info {
            color: #71829e;
            flex: 1;
            padding-right: 60px;
            user-select: none;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .album-info {
                padding-right: 30px;
            }
        }
        
        .album-info__name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
            line-height: 1.3em;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .album-info__name {
                font-size: 18px;
                margin-bottom: 9px;
            }
        }
        
        .album-info__track {
            font-weight: 400;
            font-size: 20px;
            opacity: 0.7;
            line-height: 1.3em;
            min-height: 52px;
        }
        
        @media screen and (max-width: 576px), (max-height: 500px) {
            .album-info__track {
                font-size: 18px;
                min-height: 50px;
            }
        }
        
        .github-btn {
            position: absolute;
            right: 40px;
            bottom: 50px;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 4px;
            box-shadow: 0px 4px 30px -6px rgba(36, 52, 70, 0.65);
            background: #24292e;
            color: #fff;
            font-weight: bold;
            letter-spacing: 1px;
            font-size: 16px;
            transition: all .3s ease-in-out;
        }
        
        @media screen and (min-width: 500px) {
            .github-btn:hover {
                transform: scale(1.1);
                box-shadow: 0px 17px 20px -6px rgba(36, 52, 70, 0.36);
            }
        }
        
        @media screen and (max-width: 700px) {
            .github-btn {
                position: relative;
                bottom: auto;
                right: auto;
                margin-top: 20px;
                display: inline-block;
            }
            .github-btn:active {
                transform: scale(1.1);
                box-shadow: 0px 17px 20px -6px rgba(36, 52, 70, 0.36);
            }
        }
        

        .playlist {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            padding: 10px;
        }
        
        .playlist-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            margin-bottom: 5px;
        }
        
        .playlist-item:hover {
            background: rgba(83, 42, 185, 0.1);
        }
        
        .playlist-item.active {
            background: rgba(83, 42, 185, 0.2);
            color: #532ab9;
        }
        
        .playlist-item__cover {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            background-size: cover;
            background-position: center;
            margin-right: 12px;
            flex-shrink: 0;
        }
        
        .playlist-item__info {
            flex: 1;
            min-width: 0;
        }
        
        .playlist-item__name {
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .playlist-item__artist {
            font-size: 12px;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .playlist-item__duration {
            font-size: 12px;
            opacity: 0.5;
            margin-left: 10px;
        }
        

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 0 10px;
        }
        
        .volume-slider {
            flex: 1;
            height: 4px;
            background: #d0d8e6;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }
        
        .volume-level {
            height: 100%;
            background: #a3b3ce;
            border-radius: 2px;
            width: 70%;
        }
        

        .scale-out-enter-active {
            transition: all .35s ease-in-out;
        }
        .scale-out-leave-active {
            transition: all .35s ease-in-out;
        }
        .scale-out-enter {
            transform: scale(.55);
            pointer-events: none;
            opacity: 0;
        }
        .scale-out-leave-to {
            transform: scale(1.2);
            pointer-events: none;
            opacity: 0;
        }
        
        .scale-in-enter-active {
            transition: all .35s ease-in-out;
        }
        .scale-in-leave-active {
            transition: all .35s ease-in-out;
        }
        .scale-in-enter {
            transform: scale(1.2);
            pointer-events: none;
            opacity: 0;
        }
        .scale-in-leave-to {
            transform: scale(.55);
            pointer-events: none;
            opacity: 0;
        }
        

        .playlist::-webkit-scrollbar {
            width: 6px;
        }
        .playlist::-webkit-scrollbar-track {
            background: transparent;
        }
        .playlist::-webkit-scrollbar-thumb {
            background: #acb8cc;
            border-radius: 3px;
        }
        

        .playlist-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.8);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #71829e;
            transition: all 0.3s;
            z-index: 10;
        }
        
        .playlist-toggle:hover {
            background: #fff;
            color: #532ab9;
            transform: scale(1.1);
        }
        
        .playlist-container {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #eef3f7;
            border-radius: 0 0 15px 15px;
            box-shadow: 0px 15px 35px -5px rgba(50, 88, 130, 0.32);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            z-index: 5;
        }
        
        .playlist-container.show {
            max-height: 300px;
            margin-top: -10px;
            padding: 20px;
            padding-top: 30px;
        }
        
        @media screen and (max-width: 576px) {
            .playlist-container.show {
                position: relative;
                margin-top: 20px;
                border-radius: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper" id="app">
        <div class="player">

            <button class="playlist-toggle" @click="togglePlaylist" title="Toggle Playlist">
                <svg class="icon" style="width: 20px; height: 20px;">
                    <use xlink:href="#icon-list"></use>
                </svg>
            </button>

            <div class="player__top">
                <div class="player-cover">
                    <transition-group :name="transitionName">
                        <div class="player-cover__item" 
                             v-if="$index === currentTrackIndex" 
                             :style="{ backgroundImage: `url(${track.cover})` }" 
                             v-for="(track, $index) in tracks" 
                             :key="$index">
                        </div>
                    </transition-group>
                </div>
                <div class="player-controls">
                    <div class="player-controls__item -favorite" 
                         :class="{ active : currentTrack.favorited }" 
                         @click="favorite">
                        <svg class="icon">
                            <use xlink:href="#icon-heart-o"></use>
                        </svg>
                    </div>
                    <a :href="currentTrack.url" target="_blank" class="player-controls__item">
                        <svg class="icon">
                            <use xlink:href="#icon-link"></use>
                        </svg>
                    </a>
                    <div class="player-controls__item" @click="prevTrack">
                        <svg class="icon">
                            <use xlink:href="#icon-prev"></use>
                        </svg>
                    </div>
                    <div class="player-controls__item" @click="nextTrack">
                        <svg class="icon">
                            <use xlink:href="#icon-next"></use>
                        </svg>
                    </div>
                    <div class="player-controls__item -xl js-play" @click="play">
                        <svg class="icon">
                            <use xlink:href="#icon-pause" v-if="isTimerPlaying"></use>
                            <use xlink:href="#icon-play" v-else></use>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="progress" ref="progress">
                <div class="progress__top">
                    <div class="album-info" v-if="currentTrack">
                        <div class="album-info__name">{{ currentTrack.artist }}</div>
                        <div class="album-info__track">{{ currentTrack.name }}</div>
                    </div>
                    <div class="progress__duration">{{ duration }}</div>
                </div>
                <div class="progress__bar" @click="clickProgress">
                    <div class="progress__current" :style="{ width : barWidth }"></div>
                </div>
                <div class="progress__time">{{ currentTime }}</div>
            </div>


            <div class="volume-control">
                <svg class="icon" style="width: 20px; height: 20px; color: #71829e; cursor: pointer;" @click="toggleMute">
                    <use :xlink:href="isMuted ? '#icon-mute' : '#icon-volume'"></use>
                </svg>
                <div class="volume-slider" @click="setVolume">
                    <div class="volume-level" :style="{ width: volume + '%' }"></div>
                </div>
            </div>

            <div class="playlist-container" :class="{ show: showPlaylist }">
                <div style="font-weight: bold; color: #71829e; margin-bottom: 10px; font-size: 14px;">
                    Playlist ({{ tracks.length }} tracks)
                </div>
                <div class="playlist">
                    <div v-for="(track, index) in tracks" 
                         :key="index"
                         class="playlist-item"
                         :class="{ active: index === currentTrackIndex }"
                         @click="playTrack(index)">
                        <div class="playlist-item__cover" :style="{ backgroundImage: `url(${track.cover})` }"></div>
                        <div class="playlist-item__info">
                            <div class="playlist-item__name">{{ track.name }}</div>
                            <div class="playlist-item__artist">{{ track.artist }}</div>
                        </div>
                        <div class="playlist-item__duration" v-if="track.duration">{{ track.duration }}</div>
                        <svg v-if="index === currentTrackIndex && isTimerPlaying" 
                             class="icon" 
                             style="width: 16px; height: 16px; color: #532ab9; margin-left: 8px;">
                            <use xlink:href="#icon-volume"></use>
                        </svg>
                    </div>
                </div>
            </div>

            <div v-cloak></div>
        </div>
        
        <a href="https://social.rishboy.vip" target="_blank" class="github-btn">
            Contacts
        </a>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg" hidden xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            <symbol id="icon-heart-o" viewBox="0 0 32 32">
                <path d="M22.88 1.952c-2.72 0-5.184 1.28-6.88 3.456-1.696-2.176-4.16-3.456-6.88-3.456-4.48 0-9.024 3.648-9.024 10.592 0 7.232 7.776 12.704 15.072 17.248 0.256 0.16 0.544 0.256 0.832 0.256s0.576-0.096 0.832-0.256c7.296-4.544 15.072-10.016 15.072-17.248 0-6.944-4.544-10.592-9.024-10.592zM16 26.56c-4.864-3.072-12.736-8.288-12.736-14.016 0-5.088 3.040-7.424 5.824-7.424 2.368 0 4.384 1.504 5.408 4.032 0.256 0.608 0.832 0.992 1.472 0.992s1.248-0.384 1.472-0.992c1.024-2.528 3.040-4.032 5.408-4.032 2.816 0 5.824 2.304 5.824 7.424 0.064 5.728-7.808 10.976-12.672 14.016z"></path>
            </symbol>
            <symbol id="icon-heart" viewBox="0 0 32 32">
                <path d="M16 30.144c-0.32 0-0.64-0.096-0.896-0.256-7.296-4.576-15.104-10.048-15.104-17.344 0-7.008 4.576-10.688 9.12-10.688 2.656 0 5.152 1.216 6.88 3.392 1.728-2.144 4.224-3.392 6.88-3.392 4.544 0 9.12 3.68 9.12 10.688 0 7.296-7.808 12.768-15.104 17.344-0.256 0.16-0.576 0.256-0.896 0.256z"></path>
            </symbol>
            <symbol id="icon-pause" viewBox="0 0 32 32">
                <path d="M16 0.32c-8.64 0-15.68 7.040-15.68 15.68s7.040 15.68 15.68 15.68 15.68-7.040 15.68-15.68-7.040-15.68-15.68-15.68zM16 29.216c-7.296 0-13.216-5.92-13.216-13.216s5.92-13.216 13.216-13.216 13.216 5.92 13.216 13.216-5.92 13.216-13.216 13.216z"></path>
                <path d="M12.16 22.336v0c-0.896 0-1.6-0.704-1.6-1.6v-9.472c0-0.896 0.704-1.6 1.6-1.6v0c0.896 0 1.6 0.704 1.6 1.6v9.504c0 0.864-0.704 1.568-1.6 1.568z"></path>
                <path d="M19.84 22.336v0c-0.896 0-1.6-0.704-1.6-1.6v-9.472c0-0.896 0.704-1.6 1.6-1.6v0c0.896 0 1.6 0.704 1.6 1.6v9.504c0 0.864-0.704 1.568-1.6 1.568z"></path>
            </symbol>
            <symbol id="icon-play" viewBox="0 0 32 32">
                <path d="M21.216 15.168l-7.616-5.088c-0.672-0.416-1.504 0.032-1.504 0.832v10.176c0 0.8 0.896 1.248 1.504 0.832l7.616-5.088c0.576-0.416 0.576-1.248 0-1.664z"></path>
                <path d="M16 0.32c-8.64 0-15.68 7.040-15.68 15.68s7.040 15.68 15.68 15.68 15.68-7.040 15.68-15.68-7.040-15.68-15.68-15.68zM16 29.216c-7.296 0-13.216-5.92-13.216-13.216s5.92-13.216 13.216-13.216 13.216 5.92 13.216 13.216-5.92 13.216-13.216 13.216z"></path>
            </symbol>
            <symbol id="icon-link" viewBox="0 0 32 32">
                <path d="M23.584 17.92c0 0.864 0 1.728 0 2.56 0 1.312 0 2.656 0 3.968 0 0.352 0.032 0.736-0.032 1.12 0.032-0.16 0.032-0.288 0.064-0.448-0.032 0.224-0.096 0.448-0.16 0.64 0.064-0.128 0.128-0.256 0.16-0.416-0.096 0.192-0.192 0.384-0.32 0.576 0.096-0.128 0.16-0.224 0.256-0.352-0.128 0.16-0.288 0.32-0.48 0.48 0.128-0.096 0.224-0.16 0.352-0.256-0.192 0.128-0.352 0.256-0.576 0.32 0.128-0.064 0.256-0.128 0.416-0.16-0.224 0.096-0.416 0.16-0.64 0.16 0.16-0.032 0.288-0.032 0.448-0.064-0.256 0.032-0.512 0.032-0.768 0.032-0.448 0-0.896 0-1.312 0-1.472 0-2.976 0-4.448 0-1.824 0-3.616 0-5.44 0-1.568 0-3.104 0-4.672 0-0.736 0-1.44 0-2.176 0-0.128 0-0.224 0-0.352-0.032 0.16 0.032 0.288 0.032 0.448 0.064-0.224-0.032-0.448-0.096-0.64-0.16 0.128 0.064 0.256 0.128 0.416 0.16-0.192-0.096-0.384-0.192-0.576-0.32 0.128 0.096 0.224 0.16 0.352 0.256-0.16-0.128-0.32-0.288-0.48-0.48 0.096 0.128 0.16 0.224 0.256 0.352-0.128-0.192-0.256-0.352-0.32-0.576 0.064 0.128 0.128 0.256 0.16 0.416-0.096-0.224-0.16-0.416-0.16-0.64 0.032 0.16 0.032 0.288 0.064 0.448-0.032-0.256-0.032-0.512-0.032-0.768 0-0.448 0-0.896 0-1.312 0-1.472 0-2.976 0-4.448 0-1.824 0-3.616 0-5.44 0-1.568 0-3.104 0-4.672 0-0.736 0-1.44 0-2.176 0-0.128 0-0.224 0.032-0.352-0.032 0.16-0.032 0.288-0.064 0.448 0.032-0.224 0.096-0.448 0.16-0.64-0.064 0.128-0.128 0.256-0.16 0.416 0.096-0.192 0.192-0.384 0.32-0.576-0.096 0.128-0.16 0.224-0.256 0.352 0.128-0.16 0.288-0.32 0.48-0.48-0.128 0.096-0.224 0.16-0.352 0.256 0.192-0.128 0.352-0.256 0.576-0.32-0.128 0.064-0.256 0.128-0.416 0.16 0.224-0.096 0.416-0.16 0.64-0.16-0.16 0.032-0.288 0.032-0.448 0.064 0.48-0.064 0.96-0.032 1.44-0.032 0.992 0 1.952 0 2.944 0 1.216 0 2.432 0 3.616 0 1.056 0 2.112 0 3.168 0 0.512 0 1.024 0 1.536 0 0 0 0 0 0.032 0 0.448 0 0.896-0.192 1.184-0.48s0.512-0.768 0.48-1.184c-0.032-0.448-0.16-0.896-0.48-1.184s-0.736-0.48-1.184-0.48c-0.64 0-1.28 0-1.92 0-1.408 0-2.816 0-4.224 0-1.44 0-2.848 0-4.256 0-0.672 0-1.344 0-2.016 0-0.736 0-1.472 0.192-2.112 0.576s-1.216 0.96-1.568 1.6c-0.384 0.64-0.544 1.376-0.544 2.144 0 0.672 0 1.376 0 2.048 0 1.28 0 2.56 0 3.84 0 1.504 0 3.040 0 4.544 0 1.408 0 2.848 0 4.256 0 0.992 0 1.952 0 2.944 0 0.224 0 0.448 0 0.64 0 0.864 0.224 1.76 0.768 2.464 0.16 0.192 0.288 0.384 0.48 0.576s0.384 0.352 0.608 0.512c0.32 0.224 0.64 0.384 1.024 0.512 0.448 0.16 0.928 0.224 1.408 0.224 0.16 0 0.32 0 0.48 0 0.896 0 1.792 0 2.72 0 1.376 0 2.784 0 4.16 0 1.536 0 3.040 0 4.576 0 1.312 0 2.656 0 3.968 0 0.768 0 1.536 0 2.336 0 0.416 0 0.832-0.032 1.248-0.128 1.504-0.32 2.784-1.6 3.104-3.104 0.128-0.544 0.128-1.056 0.128-1.568 0-0.608 0-1.184 0-1.792 0-1.408 0-2.816 0-4.224 0-0.256 0-0.512 0-0.768 0-0.448-0.192-0.896-0.48-1.184s-0.768-0.512-1.184-0.48c-0.448 0.032-0.896 0.16-1.184 0.48-0.384 0.384-0.576 0.768-0.576 1.248v0z"></path>
                <path d="M32 11.232c0-0.8 0-1.568 0-2.368 0-1.248 0-2.528 0-3.776 0-0.288 0-0.576 0-0.864 0-0.896-0.768-1.696-1.696-1.696-0.8 0-1.568 0-2.368 0-1.248 0-2.528 0-3.776 0-0.288 0-0.576 0-0.864 0-0.448 0-0.896 0.192-1.184 0.48s-0.512 0.768-0.48 1.184c0.032 0.448 0.16 0.896 0.48 1.184s0.736 0.48 1.184 0.48c0.8 0 1.568 0 2.368 0 1.248 0 2.528 0 3.776 0 0.288 0 0.576 0 0.864 0-0.576-0.576-1.12-1.12-1.696-1.696 0 0.8 0 1.568 0 2.368 0 1.248 0 2.528 0 3.776 0 0.288 0 0.576 0 0.864 0 0.448 0.192 0.896 0.48 1.184s0.768 0.512 1.184 0.48c0.448-0.032 0.896-0.16 1.184-0.48 0.352-0.256 0.544-0.64 0.544-1.12v0z"></path>
                <path d="M15.040 21.888c0.16-0.16 0.288-0.288 0.448-0.448 0.384-0.384 0.8-0.8 1.184-1.184 0.608-0.608 1.184-1.184 1.792-1.792 0.704-0.704 1.44-1.44 2.176-2.176 0.8-0.8 1.568-1.568 2.368-2.368s1.6-1.6 2.4-2.4c0.736-0.736 1.504-1.504 2.24-2.24 0.64-0.64 1.248-1.248 1.888-1.888 0.448-0.448 0.896-0.896 1.344-1.344 0.224-0.224 0.448-0.416 0.64-0.64 0 0 0.032-0.032 0.032-0.032 0.32-0.32 0.48-0.768 0.48-1.184s-0.192-0.896-0.48-1.184c-0.32-0.288-0.736-0.512-1.184-0.48-0.512 0.032-0.928 0.16-1.248 0.48-0.16 0.16-0.288 0.288-0.448 0.448-0.384 0.384-0.8 0.8-1.184 1.184-0.608 0.608-1.184 1.184-1.792 1.792-0.704 0.704-1.44 1.44-2.176 2.176-0.8 0.8-1.568 1.568-2.368 2.368s-1.6 1.6-2.4 2.4c-0.736 0.736-1.504 1.504-2.24 2.24-0.64 0.64-1.248 1.248-1.888 1.888-0.448 0.448-0.896 0.896-1.344 1.344-0.224 0.224-0.448 0.416-0.64 0.64 0 0-0.032 0.032-0.032 0.032-0.32 0.32-0.48 0.768-0.48 1.184s0.192 0.896 0.48 1.184c0.32 0.288 0.736 0.512 1.184 0.48 0.48 0 0.928-0.16 1.248-0.48v0z"></path>
            </symbol>
            <symbol id="icon-next" viewBox="0 0 32 32">
                <path d="M2.304 18.304h14.688l-4.608 4.576c-0.864 0.864-0.864 2.336 0 3.232 0.864 0.864 2.336 0.864 3.232 0l8.448-8.48c0.864-0.864 0.864-2.336 0-3.232l-8.448-8.448c-0.448-0.448-1.056-0.672-1.632-0.672s-1.184 0.224-1.632 0.672c-0.864 0.864-0.864 2.336 0 3.232l4.64 4.576h-14.688c-1.248 0-2.304 0.992-2.304 2.272s1.024 2.272 2.304 2.272z"></path>
                <path d="M29.696 26.752c1.248 0 2.304-1.024 2.304-2.304v-16.928c0-1.248-1.024-2.304-2.304-2.304s-2.304 1.024-2.304 2.304v16.928c0.064 1.28 1.056 2.304 2.304 2.304z"></path>
            </symbol>
            <symbol id="icon-prev" viewBox="0 0 32 32">
                <path d="M29.696 13.696h-14.688l4.576-4.576c0.864-0.864 0.864-2.336 0-3.232-0.864-0.864-2.336-0.864-3.232 0l-8.448 8.48c-0.864 0.864-0.864 2.336 0 3.232l8.448 8.448c0.448 0.448 1.056 0.672 1.632 0.672s1.184-0.224 1.632-0.672c0.864-0.864 0.864-2.336 0-3.232l-4.608-4.576h14.688c1.248 0 2.304-1.024 2.304-2.304s-1.024-2.24-2.304-2.24z"></path>
                <path d="M2.304 5.248c-1.248 0-2.304 1.024-2.304 2.304v16.928c0 1.248 1.024 2.304 2.304 2.304s2.304-1.024 2.304-2.304v-16.928c-0.064-1.28-1.056-2.304-2.304-2.304z"></path>
            </symbol>
            <symbol id="icon-list" viewBox="0 0 32 32">
                <path d="M4 8h24v2h-24zM4 15h24v2h-24zM4 22h24v2h-24z"></path>
            </symbol>
            <symbol id="icon-volume" viewBox="0 0 32 32">
                <path d="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z"></path>
                <path d="M13 10v12l8-6-8-6z"></path>
            </symbol>
            <symbol id="icon-mute" viewBox="0 0 32 32">
                <path d="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z"></path>
                <path d="M13 10v12l8-6-8-6zM21 10l-8 6 8 6v-12z"></path>
            </symbol>
        </defs>
    </svg>

    <script>
        new Vue({
            el: "#app",
            data() {
                return {
                    audio: null,
                    circleLeft: null,
                    barWidth: null,
                    duration: null,
                    currentTime: null,
                    isTimerPlaying: false,
                    volume: 70,
                    isMuted: false,
                    previousVolume: 70,
                    showPlaylist: false,
                    tracks: [
                        {
                            name: "SMOKIO - KUDDAH (Reply Diss) O.M.V",
                            artist: "KEVIN SMOKIO",
                            cover: "img/kuddah.jpg",
                            source: "music/KUDDAH.mp3",
                            url: "https://youtu.be/QIUu0qeHY1w",
                            favorited: false,
                            duration: "03:25"
                        },
                        {
                            name: "Zany Inzane - Gollum ( ගොලම් )",
                            artist: "Zany Inzane",
                            cover: "img/gollum.jpg",
                            source: "music/Gollum.mp3",
                            url: "https://youtu.be/ASojRSljEDo",
                            favorited: true,
                            duration: "02:51"
                        },
                        {
                            name: "CAIRO x SMOKIO - T.O.X.I.C ( විසකුරු ) (Official Diss Track)",
                            artist: "CAIRO x SMOKIO",
                            cover: "img/texic.jpg",
                            source: "music/T.O.X.I.Ch.mp3",
                            url: "https://youtu.be/dJCslBBdh-A",
                            favorited: false,
                            duration: "04:28"
                        },
                        {
                            name: "Pazi - Usain Bolt Ft. Kevin Smokio x Tee Cee ( Official Music Video )",
                            artist: "Pazi x Kevin Smokio x Tee Cee",
                            cover: "img/usain.jpg",
                            source: "music/Usain Bolt.mp3",
                            url: "https://youtu.be/-Zxr_46gXV0",
                            favorited: false,
                            duration: "04:18"
                        },
                        {
                            name: "Akiiy - Rest In Power (R.I.P) Ft. Smokio, Master D, Ramesses Reezy, Junior Crysto | Official M/V",
                            artist: "Akiiy, Smokio, Master D, Ramesses Reezy, Junior Crysto",
                            cover: "img/RIP.jpg",
                            source: "music/Rest In Power (R.I.P).mp3",
                            url: "https://youtu.be/48PYc8jdyWc",
                            favorited: true,
                            duration: "05:32"
                        },
                        {
                            name: "Nidahasi",
                            artist: "KEVIN SMOKIO",
                            cover: "img/nidahasi.jpg",
                            source: "music/Nidahasi.mp3",
                            url: "https://youtu.be/Ljuk6KPsSAc",
                            favorited: false,
                            duration: "02:45"
                        },
                        {
                            name: "Costa x Lil Rome Praba - Na Hook (Official Music Video)",
                            artist: "Costa x Lil Rome Praba",
                            cover: "img/nohook.jpg",
                            source: "music/Na Hook.mp3",
                            url: "https://youtu.be/aFwBgKIbdvc",
                            favorited: true,
                            duration: "02:50"
                        },
                        {
                            name: "Shan Putha - Jothiy ( Pakistan | Fake ) - Official Music Video",
                            artist: "Shan Putha",
                            cover: "img/jothy.jpg",
                            source: "music/Jothiy ( Pakistan  Fake ).mp3",
                            url: "https://youtu.be/fvC2lxGAuJM",
                            favorited: false,
                            duration: "04:01"
                        },
                        {
                            name: "King Lotuss - Namak Na (නමක් නෑ) [Official Music Video]",
                            artist: "King Lotuss",
                            cover: "img/namakna.jpg",
                            source: "music/Namak Na.mp3",
                            url: "https://youtu.be/g4_cp9ziO80",
                            favorited: false,
                            duration: "03:25"
                        }
                    ],
                    currentTrack: null,
                    currentTrackIndex: 0,
                    transitionName: null
                };
            },
            methods: {
                play() {
                    if (this.audio.paused) {
                        this.audio.play();
                        this.isTimerPlaying = true;
                    } else {
                        this.audio.pause();
                        this.isTimerPlaying = false;
                    }
                },
                generateTime() {
                    let width = (100 / this.audio.duration) * this.audio.currentTime;
                    this.barWidth = width + "%";
                    this.circleLeft = width + "%";
                    let durmin = Math.floor(this.audio.duration / 60);
                    let dursec = Math.floor(this.audio.duration - durmin * 60);
                    let curmin = Math.floor(this.audio.currentTime / 60);
                    let cursec = Math.floor(this.audio.currentTime - curmin * 60);
                    if (durmin < 10) {
                        durmin = "0" + durmin;
                    }
                    if (dursec < 10) {
                        dursec = "0" + dursec;
                    }
                    if (curmin < 10) {
                        curmin = "0" + curmin;
                    }
                    if (cursec < 10) {
                        cursec = "0" + cursec;
                    }
                    this.duration = durmin + ":" + dursec;
                    this.currentTime = curmin + ":" + cursec;
                },
                updateBar(x) {
                    let progress = this.$refs.progress;
                    let maxduration = this.audio.duration;
                    let position = x - progress.offsetLeft;
                    let percentage = (100 * position) / progress.offsetWidth;
                    if (percentage > 100) {
                        percentage = 100;
                    }
                    if (percentage < 0) {
                        percentage = 0;
                    }
                    this.barWidth = percentage + "%";
                    this.circleLeft = percentage + "%";
                    this.audio.currentTime = (maxduration * percentage) / 100;
                    this.audio.play();
                },
                clickProgress(e) {
                    this.isTimerPlaying = true;
                    this.audio.pause();
                    this.updateBar(e.pageX);
                },
                prevTrack() {
                    this.transitionName = "scale-in";
                    this.isShowCover = false;
                    if (this.currentTrackIndex > 0) {
                        this.currentTrackIndex--;
                    } else {
                        this.currentTrackIndex = this.tracks.length - 1;
                    }
                    this.currentTrack = this.tracks[this.currentTrackIndex];
                    this.resetPlayer();
                },
                nextTrack() {
                    this.transitionName = "scale-out";
                    this.isShowCover = false;
                    if (this.currentTrackIndex < this.tracks.length - 1) {
                        this.currentTrackIndex++;
                    } else {
                        this.currentTrackIndex = 0;
                    }
                    this.currentTrack = this.tracks[this.currentTrackIndex];
                    this.resetPlayer();
                },
                resetPlayer() {
                    this.barWidth = 0;
                    this.circleLeft = 0;
                    this.audio.currentTime = 0;
                    this.audio.src = this.currentTrack.source;
                    setTimeout(() => {
                        if(this.isTimerPlaying) {
                            this.audio.play();
                        } else {
                            this.audio.pause();
                        }
                    }, 300);
                },
                favorite() {
                    this.tracks[this.currentTrackIndex].favorited = !this.tracks[this.currentTrackIndex].favorited;
                },
                togglePlaylist() {
                    this.showPlaylist = !this.showPlaylist;
                },
                playTrack(index) {
                    if (index === this.currentTrackIndex) {
                        this.play();
                        return;
                    }
                    this.transitionName = index > this.currentTrackIndex ? "scale-out" : "scale-in";
                    this.currentTrackIndex = index;
                    this.currentTrack = this.tracks[this.currentTrackIndex];
                    this.resetPlayer();
                    this.isTimerPlaying = true;
                    this.audio.play();
                },
                setVolume(e) {
                    const rect = e.currentTarget.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const percentage = (x / rect.width) * 100;
                    this.volume = Math.max(0, Math.min(100, percentage));
                    this.audio.volume = this.volume / 100;
                    this.isMuted = this.volume === 0;
                },
                toggleMute() {
                    if (this.isMuted) {
                        this.volume = this.previousVolume || 70;
                        this.isMuted = false;
                    } else {
                        this.previousVolume = this.volume;
                        this.volume = 0;
                        this.isMuted = true;
                    }
                    this.audio.volume = this.volume / 100;
                }
            },
            created() {
                let vm = this;
                this.currentTrack = this.tracks[0];
                this.audio = new Audio();
                this.audio.src = this.currentTrack.source;
                this.audio.volume = this.volume / 100;
                this.audio.ontimeupdate = function() {
                    vm.generateTime();
                };
                this.audio.onloadedmetadata = function() {
                    vm.generateTime();
                };
                this.audio.onended = function() {
                    vm.nextTrack();
                    this.isTimerPlaying = true;
                };
               
                for (let index = 0; index < this.tracks.length; index++) {
                    const element = this.tracks[index];
                    let link = document.createElement('link');
                    link.rel = "prefetch";
                    link.href = element.cover;
                    link.as = "image";
                    document.head.appendChild(link);
                }
            }
        });
    </script>
</body>
</html>